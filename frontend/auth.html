<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auth</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="auth">
       <div> Sign in 
        <button onclick="loginOptions()"> >> </button> 
       </div>
                 or
       <div> Create new Account 
        <button onclick="signupInfo()"> >> </button> 
       </div>
  </div>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <div id="g_id_onload" 
  data-client_id="262988959509-6mkmceltauq8su95vqo4adas4n62qo15.apps.googleusercontent.com" 
  data-login_uri="http://localhost:3000/auth/google/callback">
  </div>
  <div class="g_id_signin" data-theme="filled_blue"></div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.8.4/axios.min.js"></script>
<script>
function loginOptions(){
    document.getElementsByClassName("auth")[0].innerHTML=`<button onclick="loginInfo()">Login to your account<button>`
}
 function loginInfo(){
    document.getElementsByClassName("auth")[0].innerHTML=` <input id="email-signin" type="text" placeholder="Email">
    <input id="password-signin" type="password" placeholder="Password"> 
    <button type="submit" onclick="signin()">Submit</button>`
 }
  async function signin(){
        const email=document.getElementById("email-signin").value;
        const password=document.getElementById("password-signin").value;
        const response= await axios.post("http://localhost:3000/signin",{
            email:email,
            password:password
         })
         if(response.data.token){
          const token= response.data.token 
          localStorage.setItem("token",token);
          alert("logged in successfully")
         }
         else{
            alert(response.data)
         }
    }
function signupInfo(){
    document.getElementsByClassName("auth")[0].innerHTML=""
      document.getElementsByClassName("auth")[0].innerHTML=` <input id="email-signup" type="text" placeholder="Email">
    <input id="password-signup" type="password" placeholder="Password"> 
    <button type="submit" onclick="signup()">Submit</button>`
 }
async function signup(){
        const email=document.getElementById("email-signup").value;
        const password=document.getElementById("password-signup").value;
        const response= await axios.post("http://localhost:3000/signup",{
            email:email,
            password:password
         })
         
          alert(response.data)
}
</script>
</html>