<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flixFusion</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>   
<div class="nav-bar2">
        <h1>flixFusion</h1>
        <div id="search-area">
            <input id="do-search" type="text" placeholder="Search...">
            <button class="fas fa-search" type="submit" onclick="search()"></button>
        </div>
</div>
        
<div style="color:white">
    <p id="trMovie">Trending Movies</p>
    <div id="movies" style="display:flex"></div>
</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.8.4/axios.min.js"></script>
<script>
    const apikey="69318cb897ca41bb2651034004fc0ed0";
    async function movieData(){
        const response=await axios.get(`https://api.themoviedb.org/3/trending/movie/day?api_key=${apikey}`);
       const movieArr= response.data.results;

       for(let i=0;i<movieArr.length; i++){
       const poster_path= movieArr[i].poster_path;
       document.getElementById("movies").innerHTML +=
       `<img src=https://image.tmdb.org/t/p/original/${poster_path}
        width='200px'
        height='200px'
        frameborder=1
        allowfullscreen>`
       }
   }
    movieData();
    
    async function search(){
        try{
            const movie=document.getElementById("do-search").value;
        const response=await axios.get(`https://api.themoviedb.org/3/search/movie?api_key=${apikey}&query=${movie}`);
        const movieArr=response.data.results;
    
        document.getElementById("movies").innerHTML=""
      for(let i=0;i<movieArr.length;i++){
       const poster_path= movieArr[i].poster_path;
       document.getElementById("movies").innerHTML +=
       `<div>
       <img src=https://image.tmdb.org/t/p/original/${poster_path}
        width='200px'
        height='200px'
        margin='3px'
        frameborder=1
        allowfullscreen>
        <p>${movieArr[i].title}</p>
        </div>`
    }
   }catch(error){
    document.getElementById("movies").innerHTML =""
    document.getElementById("movies").innerHTML ="<p>No movie available</p>"
   }
}
</script>
</html>